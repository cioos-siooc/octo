<!--
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at http://mozilla.org/MPL/2.0/.
  -->
<span *ngFor="let layer of layers; let i=index">
  <ng-container *ngIf="currentDraggedLayer !== undefined">
      <div 
        *ngIf="(layer.priority !== currentDraggedLayer.priority && (!layer.alwaysOnTop))"
        droppable
        (onDrop)="dropItem(layer.priority, $event)"
        [ngClass]="{'drop-area': isBeingDragged,
                    '': !isBeingDragged}"
      ></div>
    </ng-container>
    <div draggable (onDragStart)="onDragStart(layer, $event)" (onDragEnd)='onDragEnd()' [dragData]='layer'>
        <app-layer [layer]="layer"></app-layer>
    </div>
    <div *ngIf="((layers.length - 1) === i) && (!layer.alwaysOnTop)" droppable (onDrop)="dropItem(layer.priority - 1, $event)" dragHintClass="drop-area"></div>
</span> 